const f=t=>{if(!t)return null;const[i,n]=t.split(/[:.]/).map(r=>parseInt(r,10));return!Number.isFinite(i)||!Number.isFinite(n)?null:i*60+n};function g(t,i="Europe/Oslo"){try{const n=typeof t=="string"?new Date(t):t;if(isNaN(n.getTime()))return"Ukjent dato";const a=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"short",timeZone:i}).formatToParts(n),s=a.find(o=>o.type==="day")?.value;let e=a.find(o=>o.type==="month")?.value||"";return e.length>0&&(e.endsWith(".")&&(e=e.slice(0,-1)),e=e.charAt(0).toUpperCase()+e.slice(1)),`${s}. ${e}`}catch{return"Ukjent dato"}}function m(t,i=new Date,n="Europe/Oslo"){const r=typeof t=="string"?new Date(t):t;if(isNaN(r.getTime()))return"";const a=new Date(i.toLocaleString("en-US",{timeZone:n})),s=new Date(r.toLocaleString("en-US",{timeZone:n})),e=new Date(a.getFullYear(),a.getMonth(),a.getDate()),o=new Date(e);o.setDate(e.getDate()+1);const u=new Date(s.getFullYear(),s.getMonth(),s.getDate());return u.getTime()===e.getTime()?"i dag":u.getTime()===o.getTime()?"i morgen":new Intl.DateTimeFormat("nb-NO",{weekday:"long",timeZone:n}).format(r).toLowerCase()}function D(t,i=new Date,n="Europe/Oslo"){if(!t)return null;const r=new Date(i.toLocaleString("en-US",{timeZone:n})),a=new Intl.DateTimeFormat("sv-SE",{timeZone:n,year:"numeric",month:"2-digit",day:"2-digit"}).format(r),s=Object.keys(t).filter(Boolean).sort();if(s.length===0)return null;const e=r.getHours()*60+r.getMinutes();for(const o of s){if(o<a)continue;const u=(t[o]||[]).filter(l=>Number.isFinite(l.availableSpots)&&l.availableSpots>0).sort((l,c)=>(l.from||"").localeCompare(c.from||""));for(const l of u){const c=f(l.from);if(c!==null&&!(o===a&&c<=e))return{date:o,slot:l}}}return null}export{D as a,g as f,m as g};
